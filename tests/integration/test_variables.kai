#!/usr/bin/env kaish
source lib.kai

# Simple assignment and expansion
FOO=bar
check "$FOO" "bar" "simple assignment"

# Braced expansion
check "${FOO}" "bar" "braced expansion"

# Default value — unset
check "${UNSET_VAR:-default}" "default" "default value for unset var"

# Default value — set
SET_VAR=actual
check "${SET_VAR:-default}" "actual" "default value not used when set"

# Arithmetic
X=$((2 + 3))
check "$X" "5" "arithmetic addition"

Y=$((X * 4))
check "$Y" "20" "arithmetic multiplication"

# Arithmetic inside double quotes with apostrophe (Bug A regression test)
check "It's $((1+1))" "It's 2" "arithmetic with apostrophe in double quotes"

# Arithmetic in double-quoted string
check "$((2+3)) items" "5 items" "arithmetic in double-quoted string"

# String length
STR="hello"
check "${#STR}" "5" "string length"

# Nested assignment
A=1
B=$A
check "$B" "1" "variable referencing variable"

summary
